---
interface Props {
  src: string;
  poster?: string;
  alt?: string;
  autoplay?: boolean;
  muted?: boolean;
  loop?: boolean;
  controls?: boolean;
  preload?: 'none' | 'metadata' | 'auto';
  class?: string;
}

const {
  src,
  poster,
  alt = 'Video content',
  autoplay = true,
  muted = true,
  loop = true,
  controls = true,
  preload = 'metadata',
  class: className = ''
} = Astro.props;
---

<figure class={`video-container w-full my-8 ${className}`}>
  <video
    src={src}
    poster={poster}
    autoplay={autoplay}
    muted={muted}
    loop={loop}
    controls={controls}
    preload={preload}
    playsinline
    class='w-full rounded-xl shadow-lg border border-gray-100'
    aria-label={alt}
  >
    <p>
      Your browser does not support the video element. <a href={src}
        >Download the video</a
      >.
    </p>
  </video>
  {
    alt && alt !== 'Video content' && (
      <figcaption class='text-sm text-gray-500 text-center mt-3 italic'>
        {alt}
      </figcaption>
    )
  }
</figure>

<style>
  .video-container video {
    max-width: 100%;
    height: auto;
    background-color: #f3f4f6;
  }

  /* Add subtle hover effect */
  .video-container video:hover {
    box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.15);
    transition: box-shadow 0.3s ease;
  }
</style>
