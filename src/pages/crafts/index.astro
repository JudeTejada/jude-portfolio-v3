---
import Layout from '../../layouts/Layout.astro';
import CraftIntro from '../../components/Craft/CraftIntro.astro';
import InteractiveGrid from '../../components/Craft/InteractiveGrid';
import CraftPost from '../../components/Content/CraftPost.astro';
import { getCollection } from 'astro:content';

const crafts = await getCollection('craft', ({ data }) => {
  return data.isPublished !== false;
});

const sortedCrafts = crafts.sort(
  (a, b) => new Date(b.data.publishedAt).getTime() - new Date(a.data.publishedAt).getTime()
);

const title = "Crafts â€” Jude Tejada";
const description = "A collection of experimental UI components, animations, and digital artifacts.";
---

<Layout title={title} description={description}>
  <section class="relative min-h-screen pt-32 pb-20 bg-white">
    <InteractiveGrid client:load />

    <CraftIntro />

    <div class="px-6 md:px-12 max-w-7xl mx-auto pb-32">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12">
        {sortedCrafts.map((craft) => (
          <CraftPost
            title={craft.data.title}
            summary={craft.data.summary}
            slug={craft.slug}
            image={craft.data.image}
          />
        ))}
      </div>

      {sortedCrafts.length === 0 && (
        <div class="py-24 text-center">
          <p class="text-gray-500 italic">No crafts found. Check back later!</p>
        </div>
      )}
    </div>
  </section>
</Layout>
